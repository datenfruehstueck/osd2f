<!-- page configuration -->
<script>
    window.settings = {{ upload_settings.json(ensure_ascii=False)|safe }};
    window.content = {{ content_settings.json(ensure_ascii=False)|safe }};
    let sid = {{sid|tojson|safe}};
    window.sid = sid;
</script>

<!-- parsing script -->
<script src="{{content_settings.survey_base_url}}static/js/main.js"></script>

<!-- page functionality related to presentation -->
<script>
    let dropArea = document.getElementById("drop-area");

    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false)
    })

    function preventDefaults(e) {
        e.preventDefault()
        e.stopPropagation()
    }

    ['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, highlight, false)
    });

    ['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, unhighlight, false)
    })

    function highlight(e) {
        dropArea.classList.add('highlight')
    }

    function unhighlight(e) {
        dropArea.classList.remove('highlight')
    }

    // tracking whether the donation has been completed is disabled but this variable is needed nevertheless
    let noDonationYet=true
</script>